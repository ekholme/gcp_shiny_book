<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.315">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GCP Shiny Booklet - 3&nbsp; Google Cloud Background</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<link href="./why_gcp.html" rel="next">
<link href="./shiny_background.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Google Cloud Background</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">GCP Shiny Booklet</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./background.html" class="sidebar-item-text sidebar-link">Background</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny_background.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Shiny Background</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gcp_background.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Google Cloud Background</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./why_gcp.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Why Google Cloud?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hello_world.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Hello, World!</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./shiny.html" class="sidebar-item-text sidebar-link">Shiny</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create_proj.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Create Your Project</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic_app.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Base App</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./containers.html" class="sidebar-item-text sidebar-link">Containers</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./docker.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Docker</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cloudbuild.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Cloud Build &amp; Artifact Registry</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./cloud_sql.html" class="sidebar-item-text sidebar-link">Cloud SQL</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql_setup.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Cloud SQL Setup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sql_create.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Creating Your Table</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cloud_run.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Cloud Run</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#cloud-run" id="toc-cloud-run" class="nav-link active" data-scroll-target="#cloud-run"> <span class="header-section-number">3.1</span> Cloud Run</a></li>
  <li><a href="#cloud-sql" id="toc-cloud-sql" class="nav-link" data-scroll-target="#cloud-sql"> <span class="header-section-number">3.2</span> Cloud SQL</a></li>
  <li><a href="#cloud-build" id="toc-cloud-build" class="nav-link" data-scroll-target="#cloud-build"> <span class="header-section-number">3.3</span> Cloud Build</a></li>
  <li><a href="#artifact-registry" id="toc-artifact-registry" class="nav-link" data-scroll-target="#artifact-registry"> <span class="header-section-number">3.4</span> Artifact Registry</a></li>
  <li><a href="#secret-manager" id="toc-secret-manager" class="nav-link" data-scroll-target="#secret-manager"> <span class="header-section-number">3.5</span> Secret Manager</a></li>
  <li><a href="#wrapping-up" id="toc-wrapping-up" class="nav-link" data-scroll-target="#wrapping-up"> <span class="header-section-number">3.6</span> Wrapping Up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Google Cloud Background</span></h1>
</div>





<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p><a href="https://cloud.google.com/">Google Cloud Platform</a> (I’ll use GCP, Google Cloud Platform, and Google Cloud pretty much interchangeably throughout this booklet) is, along with Amazon Web Services (AWS) and Microsoft Azure, one of the three “big” public cloud services. A very simple (but not entirely correct) way to think of GCP is that it’s basically a bunch of specialized computers that you can pay to use, and these specialized computers can do different things. GCP offers services including compute (e.g.&nbsp;virtual machines, Kubernetes Engine, Cloud Run), databases (e.g.&nbsp;CloudSQL, Firestore, BigQuery), machine learning (e.g.&nbsp;Vertex AI), CI/CD (e.g.&nbsp;Cloud Build), and more. Given how large and ubiquitous of a company Google is, and given that they’re a leader in the tech industry, it’s probably not surprising that GCP can do pretty much anything you can think up.</p>
<p>It is well beyond the scope of this little booklet to delve into all of the features of GCP. Actually, it’s beyond the scope of this booklet to fully cover even the services we are going to use. So if you’re interested in learning more about GCP, there are lots of avenues you might pursue. Of these, I’d recommend:</p>
<ul>
<li><a href="https://cloud.google.com/docs/get-started">GCP’s “Get Started” page</a>, which has a great variety of tutorials and overview docs</li>
<li><a href="https://www.youtube.com/user/googlecloudplatform">The Google Cloud Tech YouTube channel</a>, which is the official GCP channel. It has some great videos for each service/product GCP offers.</li>
<li>Docs for the service you’re interested in. Each service has a variety of documents, which include code snippets and examples for many popular languages. Unfortunately, none of these code snippets are written in R (hence this book), but if you can (more or less) read another language, you can mostly get a sense for various services and how to implement them.</li>
</ul>
<p>That said, we’ll be using the following GCP services in this project. I’ll provide a very brief overview of them here, and then provide more detail about each one in the appropriate sections later on.</p>
<section id="cloud-run" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="cloud-run"><span class="header-section-number">3.1</span> Cloud Run</h2>
<p><a href="https://cloud.google.com/run">Cloud Run</a> is the main service we’re using to run our shiny application. It’s a “fully managed serverless platform,” which basically means that GCP takes care of a lot of the configuration, provisioning, and management for you – you don’t need to worry about maintaining a server – which is great. Another key feature of Cloud Run is that it runs containerized applications, and as a result can run pretty much anything you want it to, including shiny apps. We’ll get into more details later on, but one caveat of Cloud Run that I’ll mention right now is that it’s intended to run stateless applications. Shiny applications are inherently stateful, so there’s a bit of friction here. There are a few ways to address this limitation, which we’ll dive into later on, but it’s worth mentioning at the outset that, for some use cases, this might make Cloud Run a nonstarter.</p>
</section>
<section id="cloud-sql" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="cloud-sql"><span class="header-section-number">3.2</span> Cloud SQL</h2>
<p><a href="https://cloud.google.com/sql/">Cloud SQL</a> is, like its name suggests, GCP’s SQL database service. Like Cloud Run and many other GCP products, it’s a fully managed service, which (again) means that GCP takes care of a lot of the infrastructure, maintenance, etc. for you, and this is cool because if you’re like me, you’re not a database admin.</p>
<p>Cloud SQL supports MySQL, Postgres, and SQL Server. We’ll be using Postgres here, but I doubt it really makes much of a difference if you want to use one of the other two.</p>
<p>As sort of a side note, we could also use <a href="https://cloud.google.com/bigquery">BigQuery</a> rather than Cloud SQL. Deciding between BigQuery and Cloud SQL will depend on your use case.</p>
</section>
<section id="cloud-build" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="cloud-build"><span class="header-section-number">3.3</span> Cloud Build</h2>
<p><a href="https://cloud.google.com/build">Cloud Build</a> is GCP’s service for building, testing, and deploying containers. Since we’re deploying a containerized application on Cloud Run, we need a way to build that container. Cloud Build provides a way to do this when provided with the application source code and a Dockerfile. We can even trigger builds to begin automatically when we push code to a Github repo.</p>
<p>One nice feature of Cloud Build is that it gives you a lot of (120) free build minutes per day. That said, there are plenty of ways to build containers without needing Cloud Build, and you don’t <em>need</em> to use Cloud Build if you don’t want.</p>
</section>
<section id="artifact-registry" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="artifact-registry"><span class="header-section-number">3.4</span> Artifact Registry</h2>
<p>Once we build our containers, we need a place to store them. Enter <a href="https://cloud.google.com/artifact-registry">Artifact Registry</a>, GCP’s service for storing containers plus some other stuff I guess. We’ll configure our container builds to be stored here, and Cloud Run will know where to look for them when it’s time to deploy.</p>
</section>
<section id="secret-manager" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="secret-manager"><span class="header-section-number">3.5</span> Secret Manager</h2>
<p><a href="https://cloud.google.com/secret-manager">Secret Manager</a> is a small but important piece of our application. It provides a way for us to pass sensitive data (passwords, in our case) into our application without having to commit this data to our application code.</p>
</section>
<section id="wrapping-up" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="wrapping-up"><span class="header-section-number">3.6</span> Wrapping Up</h2>
<p>In this chapter, we discussed what GCP is in a very broad sense. We also previewed some of the GCP services we’ll be using to build and deploy our shiny application. In the next chapter, we’ll spend some time considering why we’d want to deploy our shiny application via Google Cloud.</p>


</section>

</main> <!-- /main -->
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./shiny_background.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Shiny Background</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./why_gcp.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Why Google Cloud?</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>